{"version":3,"file":"router.js","sources":["../src/index.js"],"sourcesContent":["class Router {\n  constructor() {\n    this.routes = {}\n    this.currentUrl = ''\n    this.history = []\n    this.currentIndex = 0\n    this.isBack = false\n    this.back = this.back.bind(this)\n    this.refresh = this.refresh.bind(this)\n    window.addEventListener('load', this.refresh, false)\n    window.addEventListener('hashchange', this.refresh, false)\n  }\n\n  route(path, callback) {\n    this.routes[path] = callback || function() {}\n  }\n\n  refresh() {\n    if (this.isBack) {\n      // 回退时\n      this.currentUrl = this.history[this.currentIndex] // 获取当前的path（通过历史记录）\n      this.history.pop() // 移除历史记录\n    } else {\n      // 跳转时\n      this.currentIndex++\n      this.currentUrl = location.hash.slice(1) || '/' // 获取当前的path（通过url上的hash值）\n      this.history.push(this.currentUrl) // 新增历史记录\n    }\n    this.route(this.currentUrl)() // 执行对应方法\n    this.isBack = false // 重置回退状态\n  }\n\n  back() {\n    this.isBack = true // 置标志位为true，表明是回退\n    this.currentIndex-- // 回退历史位置\n    this.currentIndex =\n      this.currentIndex < 0 ? (this.currentIndex = 0) : this.currentIndex // 获取回退后的历史位置\n    this.currentUrl = this.history[this.currentIndex] // 获取回退后的url\n    location.hash = `#${this.currentUrl}` // 修改url的hash值\n    this.routes[this.currentUrl]() // 执行url对应的函数进行页面初始化操作\n  }\n}\n\nexport default Router\n"],"names":["routes","currentUrl","history","currentIndex","isBack","back","this","bind","refresh","window","addEventListener","path","callback","pop","location","hash","slice","push","route"],"mappings":"4eAESA,OAAS,QACTC,WAAa,QACbC,QAAU,QACVC,aAAe,OACfC,QAAS,OACTC,KAAOC,KAAKD,KAAKE,KAAKD,WACtBE,QAAUF,KAAKE,QAAQD,KAAKD,MACjCG,OAAOC,iBAAiB,OAAQJ,KAAKE,SAAS,GAC9CC,OAAOC,iBAAiB,aAAcJ,KAAKE,SAAS,wFAGhDG,EAAMC,QACLZ,OAAOW,GAAQC,GAAY,+CAI5BN,KAAKF,aAEFH,WAAaK,KAAKJ,QAAQI,KAAKH,mBAC/BD,QAAQW,aAGRV,oBACAF,WAAaa,SAASC,KAAKC,MAAM,IAAM,SACvCd,QAAQe,KAAKX,KAAKL,kBAEpBiB,MAAMZ,KAAKL,mBACXG,QAAS,sCAITA,QAAS,OACTD,oBACAA,aACHG,KAAKH,aAAe,EAAKG,KAAKH,aAAe,EAAKG,KAAKH,kBACpDF,WAAaK,KAAKJ,QAAQI,KAAKH,cACpCW,SAASC,gBAAWT,KAAKL,iBACpBD,OAAOM,KAAKL"}